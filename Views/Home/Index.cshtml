@model IndexModel
@inject LanguageService Localizer
@{
    ViewData["Title"] = "Home Page";
}
@section Css{
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
    <link rel="stylesheet" href="~/css/Slide.css" />
    <link rel="stylesheet" href="~/css/splash.css" />
    <style>
/* Swiper unique container */
.swiper-levels {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto 48px auto;
    height: 420px;
    position: relative;
}
.swiper-levels .swiper-slide.level-card {
    background-size: cover;
    background-position: center;
    border-radius: 28px;
    min-height: 330px;
    box-shadow: 0 6px 24px 0 rgba(0,0,0,0.13);
    display: flex;
    align-items: flex-end;
    overflow: hidden;
    transition: box-shadow .32s;
    cursor: pointer;
    position: relative;
}
.swiper-levels .swiper-slide.level-card:hover, 
.swiper-levels .swiper-slide.level-card:focus {
    box-shadow: 0 14px 38px 0 #ff94947a, 0 3px 10px 0 rgba(0,0,0,0.11);
}
.level-overlay {
    width: 100%;
    background: linear-gradient(0deg, #1a1a1a 82%,rgba(0,0,0,.01) 100%);
    color: #fff;
    padding: 30px 28px 24px 28px;
    opacity: 0.97;
    transition: background 0.28s, opacity 0.28s;
    min-height: 188px;
}
.level-card:hover .level-overlay, .level-card:focus .level-overlay {
    background: linear-gradient(0deg, #ff9494e6 38%,#222 100%);
    opacity: 1;
}
.level-overlay h2 {
    font-size: 2.2rem;
    font-weight: 800;
    margin-bottom: 8px;
}
.level-overlay h4 {
    font-size: 1.13rem;
    font-weight: 500;
    margin-bottom: 15px;
    color: #FFD1D1;
}
.level-overlay p {
    font-size: 1.05rem;
    margin-bottom: 16px;
    line-height: 1.55;
    max-height: 60px;
    overflow: hidden;
    transition: max-height 0.4s;
}
.level-card:hover .level-overlay p, .level-card:focus .level-overlay p {
    max-height: 120px;
}
.level-btn {
    padding: 12px 34px;
    border-radius: 11px;
    background: #FF9494;
    color: #fff;
    text-decoration: none;
    font-weight: 700;
    font-size: 1rem;
    letter-spacing: .5px;
    transition: background .2s, color .2s, transform .19s;
    box-shadow: 0 3px 15px #ff949447;
    display: inline-block;
}
.level-btn:hover, .level-btn:focus {
    background: #FFD1D1;
    color: #FF9494;
    transform: scale(1.08);
}
/* Responsive */
@@media (max-width: 900px) {
    .swiper-levels { height: 335px; }
    .level-overlay { padding: 16px 9px 10px 12px; }
    .level-overlay h2 { font-size: 1.35rem; }
}
@@media (max-width: 600px) {
    .swiper-levels { height: 270px; }
    .level-overlay h2 { font-size: 1.12rem; }
    .level-overlay h4 { font-size: 1rem; }
}
.swiper-levels .swiper-pagination {
    bottom: 9px !important;
    display: flex;
    justify-content: center;
    gap: 12px;
}
.swiper-levels .swiper-pagination-bullet {
    width: 38px;
    height: 7px;
    border-radius: 4px;
    background: #FFD1D1;
    opacity: 0.7;
    transition: opacity .27s, width .27s;
}
.swiper-levels .swiper-pagination-bullet-active {
    background: #FF9494;
    opacity: 1;
    width: 60px;
}
.swiper-levels .swiper-button-prev,
.swiper-levels .swiper-button-next {
    color: #FFD1D1;
    transition: color .22s, transform .25s;
}
.swiper-levels .swiper-button-prev:hover,
.swiper-levels .swiper-button-next:hover {
    color: #FF9494;
    transform: scale(1.17);
}
</style>
    <style>
/* Advanced Blog Card Media Styles */
.advanced-blog-card__media {
    position: relative;
    width: 100%;
    height: 300px; /* Fixed height for uniformity */
    overflow: hidden;
}

.advanced-blog-card__slide {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
}

/* Image styling: fill container and cover */
.advanced-blog-card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

/* For iframes (video and maps), force them to fill container */
.advanced-blog-card__video,
.advanced-blog-card__map {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
    /* Modern browsers support object-fit on iframes,
       so it helps ensure the content covers the container. */
    object-fit: cover;
}

    </style> 
    <style>
      .video-container {
        position: relative;
        width: 100%;
        padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
        height: 0;
        overflow: hidden;
      }
      .video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
    </style>
    }
<main>
<section>
    <div data-aos="fade-down">
        @await Component.InvokeAsync("Slide")
    </div>
</section>
<!-- Hero Section: Introduction -->
<section class="hero pb-5">
  <div id="Isik" class="container-fluid">
    <div id="overlayText">
      <h1>@Localizer.GetKey("Logo").Value</h1>
      <span class="subtext">@Localizer.GetKey("Reklam").Value</span><br>
      <a asp-controller="Account" asp-action="Account" class="btn btn-light">@Localizer.GetKey("Register_Title").Value</a>
    </div>
    <canvas id="three-canvas"></canvas>
  </div>
</section>
<!-- Video Grid Section -->
<section class="video-grid py-5 bg-alt">
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-4 mb-4">
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/GghnZjCahX0?si=XbEyDDN6ky9QKKQx" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>
      <div class="col-12 col-md-4 mb-4">
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/x-tX7WTu08o?si=ug28IJvh3GKNCCfH" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>
      <div class="col-12 col-md-4 mb-4">
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/KbYtsT-596U?si=GMu_NW5fJLD_Htl-" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </div>
</section>
@{
    var levelCodes = new[] { "A1", "A2", "B1", "B2", "C1" };
}
<section class="blog-grid-section pb-5">
    <h1 class="display-4 fw-bold text-center text-fourth">@Localizer.GetKey("Kurs").Value</h1>
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="swiper swiper-levels" style="width:100%;">
                <div class="swiper-wrapper">
                    @foreach (var code in levelCodes)
                    {
                        var title = Localizer.GetKey($"Level_{code}_Title").Value;
                        var desc  = Localizer.GetKey($"Level_{code}_Desc").Value;
                        // Arka plan otomatik oluşturuluyor:
                        var bg    = $"/img/{code.ToLower()}.jpeg";
                    <div class="swiper-slide level-card" style="background-image:url('@bg');" tabindex="0">
                        <div class="level-overlay">
                            <h2>@code</h2>
                            <h4>@title</h4>
                            <p>@desc</p>
                            <a href="@Url.Action("Quizzes", "Account", new { level = code })" class="level-btn">@Localizer.GetKey("TesteBasla").Value</a>
                        </div>
                    </div>
                    }
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
            </div>
        </div>
    </div>
</section>
</main>
  @section Scripts {
    <script>
      window.localizedSplashMessage = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(_localization.GetKey("SplashMessage").Value));
    </script>
    <!-- Three.js -->
      <script type="importmap">
      {
        "imports": {
          "three": "/lib/three/build/three.module.js"
        }
      }
    </script>
    <!-- Load splash.js as an ES Module -->
    <script type="module" src="~/js/splash.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dat.gui@0.7.9/build/dat.gui.module.js" type="module"></script>
    <script type="module" src="~/js/anime.js"></script> 
        <!-- GSAP -->
    <script src="~/lib/gsap/gsap.min.js"></script>
    <script src="~/lib/gsap/ScrollTrigger.min.js"></script>
    <script>
    gsap.registerPlugin(ScrollTrigger); // <-- Register explicitly
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
      AOS.init();
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
    // Initialize Swiper for each advanced blog card media container.
    var blogMediaContainers = document.querySelectorAll('.advanced-blog-card__media');
    blogMediaContainers.forEach(function(container) {
        new Swiper(container, {
            slidesPerView: 1,
            spaceBetween: 10,
            pagination: {
                el: container.querySelector('.advanced-blog-card__pagination'),
                clickable: true
            },
            navigation: {
                nextEl: container.querySelector('.advanced-blog-card__next') || container.parentElement.querySelector('.advanced-blog-card__next'),
                prevEl: container.querySelector('.advanced-blog-card__prev') || container.parentElement.querySelector('.advanced-blog-card__prev')
            },
            loop: true,
            autoplay: {
                delay: 5000,
                disableOnInteraction: false
            }
        });
    });

    // Optional: Add GSAP hover animation for advanced blog cards.
    gsap.utils.toArray('.advanced-blog-card').forEach(function(card) {
        card.addEventListener('mouseenter', function () {
            gsap.to(card, { scale: 1.03, duration: 0.3 });
        });
        card.addEventListener('mouseleave', function () {
            gsap.to(card, { scale: 1, duration: 0.3 });
        });
    });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    var levelsSwiper = new Swiper('.swiper-levels', {
        slidesPerView: 1.13,
        spaceBetween: 25,
        centeredSlides: true,
        loop: true,
        pagination: {
            el: '.swiper-levels .swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-levels .swiper-button-next',
            prevEl: '.swiper-levels .swiper-button-prev',
        },
        breakpoints: {
            700: { slidesPerView: 2.2, spaceBetween: 35 },
            1024: { slidesPerView: 3, spaceBetween: 42 }
        }
    });
});
</script>
  } 